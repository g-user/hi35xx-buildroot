From c90cb76d3c08b3f288418c0104cf51cdc715809d Mon Sep 17 00:00:00 2001
From: Watson Xu <xuhuashan@gmail.com>
Date: Wed, 21 Dec 2016 11:31:37 +0800
Subject: [PATCH 05/10] adjust the NR parameter

YSFSTR = 140
YTFStr = 64
---
 src/platform/hi3518v200mpp/himpp-video-vpss.cpp | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/src/platform/hi3518v200mpp/himpp-video-vpss.cpp b/src/platform/hi3518v200mpp/himpp-video-vpss.cpp
index b407216..f7d9142 100644
--- a/src/platform/hi3518v200mpp/himpp-video-vpss.cpp
+++ b/src/platform/hi3518v200mpp/himpp-video-vpss.cpp
@@ -75,6 +75,20 @@ bool HimppVpssGroup::enableObject()
         return false;
     }
 
+    VPSS_NR_PARAM_U nrparam;
+    if ((s32Ret = HI_MPI_VPSS_GetNRParam(_grpid, &nrparam)) == HI_SUCCESS) {
+        nrparam.stNRParam_V1.s32YSFStr = 140;
+        nrparam.stNRParam_V1.s32YTFStr = 64;
+        if ((s32Ret = HI_MPI_VPSS_SetNRParam(_grpid, &nrparam)) != HI_SUCCESS) {
+            HIMPP_PRINT("HI_MPI_VPSS_SetNRParam %d failed [%#x]\n",
+                        _grpid, s32Ret);
+        }
+    }
+    else {
+        HIMPP_PRINT("HI_MPI_VPSS_GetNRParam %d failed [%#x]\n",
+                    _grpid, s32Ret);
+    }
+
     if ((s32Ret = HI_MPI_VPSS_StartGrp(_grpid)) != HI_SUCCESS) {
         HIMPP_PRINT("HI_MPI_VPSS_CreateGrp %d failed [%#x]\n",
                     _grpid, s32Ret);
-- 
2.9.3

